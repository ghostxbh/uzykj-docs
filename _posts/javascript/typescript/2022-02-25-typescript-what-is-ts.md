---
title: ä»€ä¹ˆæ˜¯ TypeScript
date: 2022-02-25
sidebar: 'auto'
categories:
  - Javascript
tags:
  - TypeScript
  - TS
  - é™æ€ç±»å‹
author: tasaid
location: blog
summary: TypeScript ç®€ç§° TSã€‚TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå°±æ˜¯åœ¨ JavaScript ä¸Šåšäº†ä¸€å±‚å°è£…ï¼Œå°è£…å‡º TypeScript çš„ç‰¹æ€§ï¼Œå½“ç„¶æœ€ç»ˆä»£ç å¯ä»¥ç¼–è¯‘ä¸º JavaScriptã€‚
---
  
# ä»€ä¹ˆæ˜¯ TypeScript

## ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript
å‡ ä¸ªæœˆå‰ï¼Œå›¢é˜Ÿé‡Œè§‰å¾—å¾ˆå¤šé¡¹ç›®è·‘çš„è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œå›¢é˜Ÿåä½œé‡åˆ°äº†ä¸€ä¸ªå¾ˆå¤§çš„éš¾é¢˜ï¼š
å¦‚ä½•è®©ä¸€ä¸ªåˆ«äººæä¾›çš„æ–¹æ³•äº§å‡ºä¸€ä¸ªä¸€ç›®äº†ç„¶çš„æ–‡æ¡£ï¼Ÿå› ä¸ºä¸€ä¸ªé¡¹ç›®æ€»ä¼šæ¶‰åŠåˆ°å¤šäººåä½œï¼š
**åŒå­¦ A** ç¼–å†™äº†å‡½æ•° `a()`ï¼Œè€Œ **åŒå­¦ B** åœ¨è°ƒç”¨å‡½æ•° `a()` çš„æ—¶å€™å¾—ä¸€ç›´æ’¸ç€ API æ–‡æ¡£æ‰èƒ½çŸ¥é“ `a()` éœ€è¦ä»€ä¹ˆå‚æ•°ï¼Œä¼šè¿”å›ä»€ä¹ˆå‚æ•°ã€‚

è€Œ **åŒå­¦ A** åç»­åˆæ”¹åŠ¨äº†å‡½æ•° `a()`ï¼Œä½†æ˜¯å´å¿˜è®°äº†æ›´æ–°æ–‡æ¡£ï¼Œè¿™æ—¶å€™æ–°æ¥æ‰‹é¡¹ç›®çš„ **åŒå­¦ C** çœ‹ç€ API æ–‡æ¡£å’Œå‡½æ•° a() ä¸€è„¸æ‡µé€¼ï¼Œé—®é¢˜æµ®å‡ºæ°´é¢ï¼šå›¢é˜Ÿåä½œä¸­ï¼Œæä¾›çš„æ¥å£å¦‚ä½•æè¿°è‡ªèº«ï¼Ÿ

è¿™å…¶ä¸­æ¶‰åŠåˆ°çš„é—®é¢˜æœ‰ï¼š

æ¥å£å¦‚ä½•æè¿°è‡ªå·±çš„å‚æ•°å’Œè¿”å›å€¼ï¼Ÿ
æ¥å£å‚æ•°å’Œè¿”å›å€¼åœ¨æ— æ•°éœ€æ±‚è¿­ä»£ä¸­æ”¹å˜äº†å¤šæ¬¡ï¼Œè€Œè¿™ä¸ª API å¯¹åº”çš„æ–‡æ¡£è¯¥å¦‚ä½•æ›´æ–°ï¼Ÿ
æ•°æ®æ ¼å¼å¦‚ä½•æè¿°
æˆ‘ä»¬æ„è¯†åˆ° JavaScript åœ¨é€æ¸å¤æ‚çš„ Web åº”ç”¨ä¸­ç¼ºå°‘ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ï¼š**é™æ€ç±»å‹**ã€‚

å› ä¸ºéœ€è¦æœ‰é™æ€ç±»å‹æˆ‘ä»¬æ‰å¯ä»¥çŸ¥é“è¿™ä¸ªå‡½æ•°éœ€è¦çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç±»å‹ï¼Œè¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå“ªäº›å­—æ®µæ˜¯å¯èƒ½ç©ºï¼Œå“ªäº›å­—æ®µåˆéœ€è¦ä»€ä¹ˆæ ·çš„æ ¼å¼ã€‚

æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°äº†ä¸šç•Œèåˆäº JavaScript çš„æ–¹æ¡ˆï¼š[Flow](https://zhenyong.github.io/flowtype/)

åæ¥å¯¹æ¯”ä¹‹åå‘ç°ï¼š

- 1ã€ç”Ÿæ€åœˆï¼ŒTypeScript çš„ç”Ÿæ€åœˆæ˜æ˜¾åœ¨ Flow ä¹‹ä¸Šï¼Œå„å¤§ä¸»æµç±»åº“éƒ½æä¾›äº† TypeScript çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œé…åˆ visual studio code ç¼–ç ä½“éªŒä¸Šæ¯” Flow å¼ºå¤ªå¤šã€‚
- 2ã€Flow æ˜¯ä¾µå…¥ JavaScript çš„ï¼Œå¯¹ JavaScript åšäº†ä¸€å±‚å¢å¼ºï¼›è€Œ TypeScript åˆ™ä¸º JavaScript è¶…é›†ï¼Œåœ¨ JavaScript ä¹‹ä¸Šè¿›è¡Œçš„è¯­è¨€æŠ½è±¡ï¼Œæœ€ç»ˆç¼–è¯‘æˆ JavaScriptã€‚

å…¶ä¸­ç¬¬äºŒç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºå›¢é˜Ÿæˆå‘˜å¯¹æ·»åŠ äº† Flow çš„ JavaScript è¯­æ³•æƒ³å½“æ’æ–¥ï¼Œè€Œæˆ‘ä¸ªäººåŒæ ·è§‰å¾— Flow ä¾µå…¥ JavaScript å¤ªè¿‡å¼ºçƒˆï¼Œä¸å¦‚ TypeScript ç›´æ¥åšè¯­è¨€è¶…é›†å¥½ï¼Œè™½ç„¶äºŒè€…å‡ºå‘ç‚¹ä¸Šæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œä½†ä»è®¾è®¡æ€æƒ³ä¸Šæ¥è¯´ TypeScript æ›´å¸å¼•äººã€‚

TypeScript çš„å®šä½æ˜¯åšé™æ€ç±»å‹è¯­è¨€ï¼Œè€Œ Flow çš„å®šä½æ˜¯ç±»å‹æ£€æŸ¥å™¨ã€‚

æ¯•ç«Ÿå†™ç€ Flow çš„æ—¶å€™å¿ƒé‡Œæƒ³çš„æ˜¯æˆ‘åœ¨å†™ JavaScriptï¼Œè€Œå†™ TypeScript å¿ƒé‡Œæƒ³çš„æ˜¯æˆ‘åœ¨å†™ TypeScript ğŸ¤£ã€‚

## ä»€ä¹ˆæ˜¯ TypeScript
TypeScript ç®€ç§° TSã€‚TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå°±æ˜¯åœ¨ JavaScript ä¸Šåšäº†ä¸€å±‚å°è£…ï¼Œå°è£…å‡º TypeScript çš„ç‰¹æ€§ï¼Œå½“ç„¶æœ€ç»ˆä»£ç å¯ä»¥ç¼–è¯‘ä¸º JavaScriptã€‚

TypeScript æ—©æœŸçš„ç›®æ ‡æ˜¯ä¸ºäº†è®©ä¹ æƒ¯ç¼–å†™å¼ºç±»å‹è¯­è¨€çš„åç«¯ç¨‹åºå‘˜ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„ç¼–å†™å‡ºå‰ç«¯åº”ç”¨ï¼ˆå¾®è½¯å¤§æ³•å¥½ï¼‰ï¼Œå› ä¸º JavaScript æ²¡æœ‰å¼ºæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ TypeScript æä¾›äº†é™æ€æ•°æ®ç±»å‹ï¼Œè¿™æ˜¯ TypeScript çš„æ ¸å¿ƒã€‚

éšç€é¡¹ç›®å·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œè¶Šæ¥è¶Šå¤šçš„å‰ç«¯æ„è¯†åˆ°é™æ€æ•°æ®ç±»å‹çš„é‡è¦æ€§ï¼Œéšç€ TypeScript çš„é€æ¸å®Œå–„ï¼Œæ”¯æŒè€…è¶Šæ¥è¶Šå¤šï¼Œé™æ€æ•°æ®ç±»å‹çš„éœ€æ±‚è¶Šæ¥è¶Šå¼ºã€‚äºæ­¤åŒæ—¶ï¼Œ angular 2.x è¿™ä¸ªé¢†å¤´ç¾Šç‡å…ˆä½¿ç”¨ AtScript å¼€è¾Ÿäº†é™æ€æ•°æ®ç±»å‹æˆ˜åœºã€‚

JavaScript è¡Œè‡³ä»Šæ—¥ï¼Œçµæ´»ï¼ŒåŠ¨æ€è®©å®ƒæ´»è·ƒåœ¨ç¼–ç¨‹è¯­è¨€ç•Œä¸€çº¿ã€‚è€Œçµæ´»ï¼ŒåŠ¨æ€ä½¿å¾—å®ƒåˆååˆ†ç¥ç§˜ï¼Œåªæœ‰è¿è¡Œæ‰èƒ½å¾—åˆ°ç­”æ¡ˆã€‚ç±»å‹çš„è¡¥å……å¡«å……äº† JavaScript çš„ç¼ºç‚¹ï¼Œä» TypeScript ç¼–è¯‘åˆ° JavaScriptï¼Œå¤šäº†é™æ€ç±»å‹æ£€æŸ¥ï¼Œè€Œåˆä¿ç•™äº† JavaScript çš„çµæ´»åŠ¨æ€ã€‚

ç®€å•æ¥è¯´ï¼šåŠ¨æ€ä»£ç ä¸€æ—¶çˆ½ï¼Œé‡æ„å…¨å®¶ç«è‘¬åœºã€‚

### é™æ€ç±»å‹
TypeScript å‡­å€Ÿ Microsoft æ·±åšçš„è¯­è¨€è®¾è®¡åŠŸåº•ï¼Œè®¾è®¡çš„ååˆ†ä¼˜é›…å’Œç®€å•æ˜“ç”¨ï¼Œå­¦ä¹ æˆæœ¬éå¸¸ä½ã€‚

ä¸Šé¢æˆ‘ä»¬æ‰€è¯´äº†ï¼ŒTypeScript çš„æ ¸å¿ƒå°±æ˜¯é™æ€æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬æ¥ç®€å•äº†è§£ä¸€ä¸‹é™æ€æ•°æ®ç±»å‹å’Œç®€å•çš„ç±»å‹æ¨å¯¼ï¼ŒTypeScript æ˜¯ä»¥ *.ts ä½œä¸ºæ–‡ä»¶åç¼€çš„ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª demo.ts æ–‡ä»¶ï¼Œå†™ä¸‹è¿™æ®µä»£ç ï¼š
```typescript
let num: number
```
ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å˜é‡ num æ˜¯ number ç±»å‹çš„ï¼Œå¦‚æœæˆ‘ä»¬ç»™ num èµ‹å…¶ä»–ç±»å‹çš„å€¼ï¼Œåˆ™ä¼šæŠ¥é”™ï¼š

![](https://static.tasaid.com/blogs/8e5603f8b97de041f81698251c5cc94a.jpeg)

æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿæ˜¯çš„ï¼Œè¿™å°±æ˜¯ TypeScript çš„æ ¸å¿ƒã€‚

æˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸€ä¸ªå‡½æ•°è¯¥å¦‚ä½•è¡¨è¾¾ï¼š
```typescript
const fetch = function (url: string): Promise { }
```
`fetch()` å‡½æ•°æ¥æ”¶ä¸€ä¸ª `string` ç±»å‹çš„å‚æ•° urlï¼Œè¿”å›ä¸€ä¸ª `Promise`ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ª JavaScript çš„å‡½æ•°ï¼Œä¸çœ‹æ–¹æ³•å†…çš„å†™æ³•æˆ‘ä»¬å®Œå…¨ä¸çŸ¥é“è¿™ä¸ª API ä¼šæœ‰å“ªäº›å‘ã€‚
```javascript
export const fetch = function (url, params, user) {
    // dosomething
    
    return http(options).then(data => {
        return data
    }).catch(err => {
        return err
    })
}
```

è¿™æ˜¯ TypeScript çš„å†™æ³•ï¼š
```typescript
export const fetch = function (url: string | object, params?: any, user?: User): Promise<object | Error> {
    // dosomething

    return http(options).then(data => {
        return data
    }).catch(err => {
        return err
    })
}
```

è¿™ä¸ª TypeScript åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼š

- 1ã€`url` å¯èƒ½æ˜¯ `string` æˆ– `object` ç±»å‹
- 2ã€`params` æ˜¯å¯ä»¥ä¸ä¼ çš„ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä»»ä½•ç±»å‹
- 3ã€`user` è¦æ±‚æ˜¯ `User` ç±»å‹çš„ï¼Œå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ä¸ä¼ 
- 4ã€è¿”å›äº†ä¸€ä¸ª `Promise`ï¼Œ`Promise` çš„æ±‚å€¼ç»“æœå¯èƒ½æ˜¯ `object`ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ `Error`

çœ‹åˆ°ä¸Šé¢çš„ä¿¡æ¯åï¼Œæˆ‘ä»¬å¤§æ¦‚çŸ¥é“å¯ä»¥è¿™ä¹ˆè°ƒç”¨å¹¶å¤„ç† `fetch` çš„è¿”å›ç»“æœï¼š

```typescript
let result = await fetch('https://uzykj.com', { id: 1 })

// fetch å¯èƒ½ä¼šè¿”å› Error
if (result instanceof Error) {
// é”™è¯¯å¤„ç†
}
```

æ˜¯ä¸æ˜¯å¾ˆæœ‰æ„æ€ï¼ŸTypeScript åœ¨è¯´è¯ï¼ŒTypeScript åœ¨è®©ä»£ç æè¿°è‡ªèº«ã€‚

![](https://static.tasaid.com/blogs/0488223f3b2ffbc24eb68ae4c6197540.png)

è¿™å°±æ˜¯é™æ€æ•°æ®ç±»å‹çš„æ„ä¹‰ã€‚é™æ€ç±»å‹åœ¨è¶Šå¤æ‚çš„åº”ç”¨ä¸­ï¼Œéœ€æ±‚è¶Šå¼ºçƒˆã€‚

è¿™æ˜¯ `react` å¯¹äºæ•°æ®ç±»å‹çš„çº¦æŸï¼š
```javascript
import PropTypes from 'prop-types'

component.propTypes = {
    optionalArray: PropTypes.array,
    optionalBool: PropTypes.bool,
    optionalFunc: PropTypes.func,
    requiredFunc: PropTypes.func.isRequired,
}
```

è¿™æ˜¯ `vue` å¯¹äºæ•°æ®ç±»å‹çš„çº¦æŸï¼š
```vue
Vue.component('component', {
    props: {
        optionalArray: Array,
        optionalBool: Boolean,
        optionalFunc: Function,
        requiredFunc: {
            type: Function,
            required: true
        }
    }
})
```

è€Œå¼•å…¥äº† `TypeScript` ä¹‹åï¼Œå°±ä¼šæ„Ÿå—åˆ°çœŸæ­£æµç•…çš„æ•°æ®ç±»å‹çº¦æŸï¼š
```typescript
class Component {
    optionalArray?: Array<string> // string ç±»å‹çš„ æ•°ç»„
    optionalBool?: boolean // å†™ä¸Š ? å·ï¼Œå°±è¡¨ç¤ºç€è¿™ä¸ªå±æ€§å¯èƒ½ä¸ºç©º
    optionalFunc?: (foo: string, bar: number) => boolean // å‡½æ•°çš„å‚æ•°ï¼Œè¿”å›å€¼éƒ½ä¸€ç›®äº†ç„¶
    requiredFunc: () => void
}
```

## å’Œ ECMAScript ç›¸æ¯”
TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œç›®æ ‡ä¹Ÿæ˜¯å¯¹é½ ECMAScript çš„æ ‡å‡†è§„èŒƒå’Œææ¡ˆå¯¹é½ï¼Œæœ€ç»ˆ TypeScript ä¹Ÿæ˜¯ç¼–è¯‘ä¸º JavaScriptã€‚

åŒæ—¶ï¼Œå’Œ JavaScript è§„èŒƒæ ‡å‡† [ECMAScript ææ¡ˆ](https://github.com/tc39/ecma262) ç›¸æ¯”ï¼ŒTypeScript ä¹Ÿä¸€ç›´åœ¨è·Ÿè¿› ECMAScript çš„è®¸å¤šæ–°ç‰¹æ€§ã€‚

ä¾‹å¦‚å½“å‰æ¥è¯´æ¯”è¾ƒæ·±å—å¤§å®¶å–œçˆ±çš„æ–°ç‰¹æ€§ï¼š

- `import()` åŠ¨æ€è¡¨è¾¾å¼
- `decorators` è£…é¥°å™¨
- `async/await` å¼‚æ­¥

è€Œè¿™äº›éƒ½å¯ä»¥ç¼–è¯‘åˆ° `ECMAScript 3`ï¼ˆå°‘æ•°ç»†èŠ‚å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼‰ã€‚

## Tips
- ä½¿ç”¨ [visual studio code](https://code.visualstudio.com/) ç¼–è¾‘å™¨ä¼šä½“éªŒåˆ° TypeScript å¼ºå¤§çš„ç±»å‹æ¨å¯¼ï¼Œæ¯•ç«Ÿä¸¤ä¸ªéƒ½æ˜¯å¾®è½¯äº²å„¿å­
- ä¸€äº› JavaScript ç¼–å†™çš„å¤§å‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œéƒ½æä¾›äº† TypeScript çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆ`*.d.ts` æ–‡ä»¶ï¼‰, ä¸€èˆ¬éƒ½æ”¾åœ¨åŒ…ç›®å½•çš„ `types` æ–‡ä»¶å¤¹ä¸­ã€‚æˆ–è€…åœ¨ `@types/*` ä»“åº“åä¸‹å¯ä»¥æ‰¾åˆ°
- `babel` æ˜¯å°†é«˜çº§ç‰ˆæœ¬çš„ JavaScript ç¼–è¯‘ä¸ºç›®æ ‡ç‰ˆæœ¬çš„ JavaScriptï¼ŒTypeScript æ˜¯å°† TypeScript ç¼–è¯‘ä¸ºç›®æ ‡ç‰ˆæœ¬çš„ JavaScriptã€‚å®ƒä»¬çš„ç¼–è¯‘æ˜¯é‡å çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ TypeScript å¯ä»¥ä¸å†ä¾èµ– `babel` ç¼–è¯‘ã€‚


## èµ„æº
- TypeScript ä¸­æ–‡ç½‘ï¼š[https://tslang.cn/](https://tslang.cn/)
- TypeScript è§†é¢‘æ•™ç¨‹ï¼š[ã€ŠTypeScript ç²¾é€šæŒ‡å—ã€‹](https://nodelover.me/course/ts-basic)

---
æ”¶å½•æ—¶é—´: 2022-02-25

<Vssue :title="$title" />