---
title: MySQL存储
date: 2021-01-19
tags:
    - MySQL
author: 编程界的小学生
location: Gitee
---
# 存储

## 1、为什么MySQL把一行行数据存储到磁盘的时候要采取这种格式？直接像Java里面的序列化一样把很多行的数据做成一个大对象然后序列化一下写到磁盘文件里，取出来的时候直接反序列化下不香嘛？

原因很多，比如：

（1）因为不需要每次都获取全部数据，只获取其中一两个字段的话，按照现在的序列化方式，就可以计算出字段对应的偏移量来获取。

（2）序列化方式也占用较大空间。MySQL的格式会节省很多空间占用。

## 2、变长字段列表里的十六进制值为什么要逆序存储？

答：这样可以使记录中位置靠前的字段和它们对应的字段长度信息加载到内存中时，位置距离更近，可能会提高高速缓存的命中率。

> 不得不承认写这些软件的人真他娘的不是人，这种小细节都不放过。

## 3、为什么数据里的null值不直接存储为null，要搞个bitmap出来？

举个最简单的例子：在UTF-8编码下，一个英文字符是1个字节，"NULL"是四个字节 = 32位。字符串占用的空间是bit位存储占用的空间32倍。

## 4、什么是行溢出？

一个数据页大小16kb，若遇到varchar(65535)、text等这种大文本类型的，大小远大于16kb了，所以一个数据页放不下，需要多个数据页存储一行数据，缓存到buffer pool的缓存页里的时候也是多个缓存页，这就是行溢出。

---
收录时间: 2021-01-19

<Vssue :title="$title" />